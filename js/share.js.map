{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/share.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","option","coordArr","myChart","echarts","init","document","getElementById","grobal","JSON","parse","window","sessionStorage","getItem","colorList","console","log","img","Image","setAttribute","canvas","ctx","getContext","src","avatar","onload","width","height","drawImage","querySelector","innerHTML","province","location","QRCode","text","href","split","replace","colorDark","colorLight","correctLevel","CorrectLevel","H","canvaQRcode","imgQRcode","Canvas2Image","convertToImage","style","cssText","removeChild","append","initQRcode","series","data","type","mapType","roam","top","zoom","selectedMode","label","normal","show","textStyle","color","fontSize","fontWeight","emphasis","itemStyle","borderWidth","borderColor","params","itemValue","markPoint","symbol","symbolSize","province_id","push","coord","longitude","latitude","setOption","off","setItem","shareContent","body","offsetWidth","offsetHeight","createElement","String","scale","opts","allowTaint","dpi","useCORS","html2canvas","then","context","mozImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingEnabled","imgUrl","toDataURL","convert2canvas"],"mappings":"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","file":"share.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\r\nlet myChart = echarts.init(document.getElementById('china-map'));\r\n\r\nlet grobal = JSON.parse(window.sessionStorage.getItem('grobal'));\r\n\r\nlet colorList = ['#1f6d8e', '#33a4af', '#70d4de','#bce6ea', '#e5eabc', '#eeeeee'];\r\n\r\nlet provinces = ['shanghai', 'hebei', 'shanxi', 'neimenggu', 'liaoning', 'jilin', 'heilongjiang', 'jiangsu', 'zhejiang', 'anhui', 'fujian', 'jiangxi', 'shandong', 'henan', 'hubei', 'hunan', 'guangdong', 'guangxi', 'hainan', 'sichuan', 'guizhou', 'yunnan', 'xizang', 'shanxi1', 'gansu', 'qinghai', 'ningxia', 'xinjiang', 'beijing', 'tianjin', 'chongqing', 'xianggang', 'aomen'];\r\n\r\nlet provincesText = ['上海', '河北', '山西', '内蒙古', '辽宁', '吉林', '黑龙江', '江苏', '浙江', '安徽', '福建', '江西', '山东', '河南', '湖北', '湖南', '广东', '广西', '海南', '四川', '贵州', '云南', '西藏', '陕西', '甘肃', '青海', '宁夏', '新疆', '北京', '天津', '重庆', '香港', '澳门'];\r\n// 初始化echarts\r\ninitQRcode(); // 初始化二维码\r\n\r\ninitEcharts();\r\n\r\nsessionStorage.setItem(\"need-refresh\", true);\r\nwindow.onload = function () {\r\n  convert2canvas();\r\n}\r\n\r\nfunction initQRcode() { // 初始化\r\n  console.log(grobal);\r\n  var img = new Image();\r\n  // 关键点，设置crossOriginal属性\r\n  img.setAttribute('crossOrigin', 'anonymous');\r\n  var canvas = document.getElementById(\"canvas\");\r\n  var ctx = canvas.getContext('2d');\r\n  img.src = grobal.avatar;\r\n  img.onload = function () {\r\n    canvas.width = img.width;\r\n    canvas.height = img.height;\r\n    ctx.drawImage(img, 0, 0);\r\n  }\r\n  // let portaitImg = canvas.convertToImage(canvas, canvas.width, canvas.height);\r\n  // portaitImg.style.cssText = \r\n  // 'width:100%;height:100%;'\r\n  // ;\r\n  // document.querySelector('.portait').removeChild(canvas);\r\n  // document.querySelector('.portait').append(portaitImg);\r\n  // document.querySelector('.portait').append(document.querySelector('.portait img'));\r\n  // //document.querySelector('.portait > img').setAttribute('src', grobal.avatar);\r\n  document.querySelector('.message').innerHTML = `<div>我在${grobal.province}</div><div>我为湖北加油! 我为中国加油!</div>`;\r\n  console.log(window.location);\r\n  let QRcode =  new QRCode(document.querySelector(\".QRcode\"),{\r\n                                                              text: window.location.href.split('?')[0].replace('share.html', 'index.html'),// 项目首目录记得改掉\r\n                                                              colorDark: '#000000',\r\n                                                              colorLight: '#ffffff',\r\n                                                              correctLevel: QRCode.CorrectLevel.H\r\n                                                            });\r\n  let canvaQRcode = document.querySelector('.QRcode > canvas');\r\n  let imgQRcode = Canvas2Image.convertToImage(canvaQRcode, canvaQRcode.width, canvaQRcode.height);\r\n  imgQRcode.style.cssText = `\r\n    width:14.27vw;\r\n    height:14.27vw;\r\n    display:block;\r\n  `\r\n  console.log(imgQRcode);\r\n  document.querySelector('.QRcode').removeChild(canvaQRcode);\r\n  document.querySelector('.QRcode').append(imgQRcode);\r\n  document.querySelector('.QRcode').removeChild(document.querySelector('.QRcode img'));\r\n\r\n}\r\nfunction initEcharts() {\r\n  let option = {\r\n    series: [\r\n      {\r\n        name: '中国',\r\n        data: grobal.option,\r\n        type: 'map',\r\n        mapType: 'china',\r\n        roam: false,//是否开启鼠标缩放和平移漫游\r\n        top: \"3%\",//组件距离容器的距离\r\n        zoom:1.1,\r\n        selectedMode : 'single',\r\n        label: {\r\n          normal: {\r\n            show: false,//显示省份标签\r\n            textStyle:{\r\n              color: '#000',\r\n              fontSize: 8,\r\n              fontWeight: 'bold',\r\n            }//省份标签字体样式\r\n          },\r\n          emphasis: {//对应的鼠标悬浮效果\r\n            show: false,\r\n            textStyle: {\r\n              color: '#000'\r\n            }\r\n          }\r\n        },\r\n        itemStyle: {\r\n          normal: {\r\n            borderWidth: .5,//区域边框宽度\r\n            borderColor: '#000',//区域边框颜色\r\n            color: \r\n              function (params) { // 设置颜色\r\n                let itemValue = params.data.value;\r\n                let index = 0;\r\n                if (itemValue > 5000) index = 0;\r\n                else if (itemValue > 1000) index = 1;\r\n                else if (itemValue > 100) index =2;\r\n                else if (itemValue > 10) index = 3;\r\n                else if (itemValue > 0) index = 4;\r\n                else index = 5;\r\n                return colorList[index];\r\n              }\r\n          },\r\n          emphasis: {\r\n            borderWidth: .5,\r\n            borderColor: '#000',\r\n            color:\r\n              function (params) { // 设置颜色\r\n                let itemValue = params.data.value;\r\n                let index = 0;\r\n                if (itemValue > 5000) index = 0;\r\n                else if (itemValue > 1000) index = 1;\r\n                else if (itemValue > 100) index =2;\r\n                else if (itemValue > 10) index = 3;\r\n                else if (itemValue > 0) index = 4;\r\n                else index = 5;\r\n                return colorList[index];\r\n              }\r\n          }\r\n        },\r\n        markPoint: { //图表标注。\r\n          symbol: 'circle',\r\n          symbolSize: 8,//图形大小\r\n          label: {\r\n              normal: {\r\n                show: false,\r\n              },\r\n              emphasis: {\r\n                show: false,\r\n              }\r\n          },\r\n          itemStyle: {\r\n            normal: {\r\n              color: \r\n              (function () {\r\n                if(grobal.province_id !== 35 && grobal.province !== \"海外\") {\r\n                  return 'rgba(172,50,28,1)'\r\n                } else {\r\n                  return 'rgba(0, 0, 0, 0)'\r\n                }\r\n              })(),\r\n            }\r\n          },\r\n          data: (function () {\r\n            let coordArr = [];\r\n            coordArr.push({coord: [grobal.longitude, grobal.latitude]});\r\n            return coordArr;\r\n          })()\r\n        }\r\n      }\r\n    ]\r\n  };\r\n  myChart.setOption(option);\r\n  myChart.off(\"click\");\r\n}\r\nfunction convert2canvas() {\r\n  // 获取需要转化的dom对象 直接使用$('.wrap')选取的为jquery对象 无法继续操作\r\n  var cntElem = document.body;\r\n  var shareContent = cntElem; //需要截图的包裹的（原生的）DOM 对象\r\n  var width = shareContent.offsetWidth; //获取dom 宽度\r\n  var height = shareContent.offsetHeight; //获取dom 高度\r\n  var canvas = document.createElement(\"canvas\"); //创建一个canvas节点\r\n  var scale = 2; //定义任意放大倍数 支持小数\r\n  canvas.width = String(+width * scale); //定义canvas 宽度 * 缩放\r\n  canvas.height = String(+height * scale); //定义canvas高度 *缩放\r\n  console.log(canvas.width, canvas.height);\r\n  //放大后再缩小提高清晰度\r\n  canvas.getContext(\"2d\").scale(scale, scale);\r\n  //document.body.append(canvas);\r\n  console.log(width)\r\n  console.log(height)\r\n  // 设置html2canvas方法的配置\r\n  var opts = {\r\n    scale: scale, // 添加的scale 参数\r\n    canvas: canvas, //自定义 canvas\r\n    allowTaint: true, //允许画布上有跨域图片 不建议使用 后面详细补充\r\n    // logging: true, //日志开关，便于查看html2canvas的内部执行流程\r\n    width: width, //dom 原始宽度\r\n    height: height,\r\n    dpi: 4, // 设置像素点,增加清晰度\r\n    useCORS: true, // 【重要】开启跨域配置\r\n    scale:1 // 设置倍率\r\n  };\r\n  // 开始转化为canvs对象\r\n  html2canvas(shareContent, opts).then(function(canvas) {\r\n\r\n    var context = canvas.getContext('2d');\r\n    // 【重要】关闭抗锯齿\r\n    context.mozImageSmoothingEnabled = false;\r\n    context.webkitImageSmoothingEnabled = false;\r\n    context.msImageSmoothingEnabled = false;\r\n    context.imageSmoothingEnabled = false;\r\n\r\n    // 【重要】默认转化的格式为png,也可设置为其他格式\r\n    let imgUrl = canvas.toDataURL('jpg'); // 将图片在放大的canvas画出后,要导入url,不然图片只有一部分\r\n    var img = document.createElement('img');\r\n    img.src=imgUrl;\r\n    img.style.cssText = `\r\n    width:100vw;\r\n    height:100vh;\r\n    position:absolute;\r\n    top:0;\r\n    left:0;\r\n    z-index:999;\r\n    opacity:0;\r\n    `\r\n    document.body.append(img);\r\n    console.log(img);\r\n  })\r\n}\r\n"],"sourceRoot":""}