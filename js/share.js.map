{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/share.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","option","coordArr","myChart","echarts","init","document","getElementById","grobal","JSON","parse","window","sessionStorage","getItem","colorList","console","log","img","Image","setAttribute","canvas","ctx","getContext","src","avatar","onload","width","height","drawImage","querySelector","innerHTML","province","location","QRCode","text","href","split","replace","colorDark","colorLight","correctLevel","CorrectLevel","H","canvaQRcode","imgQRcode","Canvas2Image","convertToImage","style","cssText","removeChild","append","initQRcode","series","data","type","mapType","roam","top","zoom","selectedMode","label","normal","show","textStyle","color","fontSize","fontWeight","emphasis","itemStyle","borderWidth","borderColor","params","itemValue","markPoint","symbol","symbolSize","province_id","border","push","coord","longitude","latitude","setOption","off","setItem","setTimeout","shareContent","body","offsetWidth","offsetHeight","createElement","String","scale","opts","allowTaint","dpi","useCORS","html2canvas","then","context","mozImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingEnabled","imgUrl","toDataURL","convert2canvas"],"mappings":"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","file":"share.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","\nlet myChart = echarts.init(document.getElementById('china-map'));\n\nlet grobal = JSON.parse(window.sessionStorage.getItem('grobal'));\n\nlet colorList = ['#29454c', '#4c6b73', '#819d9e','#b2ced8', '#ced3e0', '#eeeeee'];\n\nlet provinces = ['shanghai', 'hebei', 'shanxi', 'neimenggu', 'liaoning', 'jilin', 'heilongjiang', 'jiangsu', 'zhejiang', 'anhui', 'fujian', 'jiangxi', 'shandong', 'henan', 'hubei', 'hunan', 'guangdong', 'guangxi', 'hainan', 'sichuan', 'guizhou', 'yunnan', 'xizang', 'shanxi1', 'gansu', 'qinghai', 'ningxia', 'xinjiang', 'beijing', 'tianjin', 'chongqing', 'xianggang', 'aomen'];\n\nlet provincesText = ['上海', '河北', '山西', '内蒙古', '辽宁', '吉林', '黑龙江', '江苏', '浙江', '安徽', '福建', '江西', '山东', '河南', '湖北', '湖南', '广东', '广西', '海南', '四川', '贵州', '云南', '西藏', '陕西', '甘肃', '青海', '宁夏', '新疆', '北京', '天津', '重庆', '香港', '澳门'];\n// 初始化echarts\ninitQRcode(); // 初始化二维码\n\ninitEcharts();\n\nsessionStorage.setItem(\"need-refresh\", true);\nwindow.onload = function () {\n  setTimeout(() => {\n    convert2canvas();\n  }, 500); // 无法取消echarts散点的动画,通过延迟截屏,来截取红点\n}\n\nfunction initQRcode() { // 初始化\n  console.log(grobal);\n  var img = new Image();\n  // 关键点，设置crossOriginal属性\n  img.setAttribute('crossOrigin', 'anonymous');\n  var canvas = document.getElementById(\"canvas\");\n  var ctx = canvas.getContext('2d');\n  img.src = grobal.avatar;\n  img.onload = function () {\n    canvas.width = img.width;\n    canvas.height = img.height;\n    ctx.drawImage(img, 0, 0);\n  }\n  // let portaitImg = canvas.convertToImage(canvas, canvas.width, canvas.height);\n  // portaitImg.style.cssText = \n  // 'width:100%;height:100%;'\n  // ;\n  // document.querySelector('.portait').removeChild(canvas);\n  // document.querySelector('.portait').append(portaitImg);\n  // document.querySelector('.portait').append(document.querySelector('.portait img'));\n  // //document.querySelector('.portait > img').setAttribute('src', grobal.avatar);\n  document.querySelector('.message').innerHTML = `<div>我在${grobal.province}</div><div>我为湖北加油! 我为中国加油!</div>`;\n  console.log(window.location);\n  let QRcode =  new QRCode(document.querySelector(\".QRcode\"),{\n                                                              text: window.location.href.split('?')[0].replace('share.html', 'index.html'),// 项目首目录记得改掉\n                                                              colorDark: '#000000',\n                                                              colorLight: '#ffffff',\n                                                              correctLevel: QRCode.CorrectLevel.H\n                                                            });\n  let canvaQRcode = document.querySelector('.QRcode > canvas');\n  let imgQRcode = Canvas2Image.convertToImage(canvaQRcode, canvaQRcode.width, canvaQRcode.height);\n  imgQRcode.style.cssText = `\n    width:14.27vw;\n    height:14.27vw;\n    display:block;\n  `\n  console.log(imgQRcode);\n  document.querySelector('.QRcode').removeChild(canvaQRcode);\n  document.querySelector('.QRcode').append(imgQRcode);\n  document.querySelector('.QRcode').removeChild(document.querySelector('.QRcode img'));\n\n}\nfunction initEcharts() {\n  let option = {\n    series: [\n      {\n        name: '中国',\n        data: grobal.option,\n        type: 'map',\n        mapType: 'china',\n        roam: false,//是否开启鼠标缩放和平移漫游\n        top: \"3%\",//组件距离容器的距离\n        zoom:1.1,\n        selectedMode : 'single',\n        label: {\n          normal: {\n            show: false,//显示省份标签\n            textStyle:{\n              color: '#000',\n              fontSize: 8,\n              fontWeight: 'bold',\n            }//省份标签字体样式\n          },\n          emphasis: {//对应的鼠标悬浮效果\n            show: false,\n            textStyle: {\n              color: '#000'\n            }\n          }\n        },\n        itemStyle: {\n          normal: {\n            borderWidth: .5,//区域边框宽度\n            borderColor: '#c8c2c6',//区域边框颜色\n            color: \n              function (params) { // 设置颜色\n                let itemValue = params.data.value;\n                let index = 0;\n                if (itemValue > 5000) index = 0;\n                else if (itemValue > 1000) index = 1;\n                else if (itemValue > 100) index =2;\n                else if (itemValue > 10) index = 3;\n                else if (itemValue > 0) index = 4;\n                else index = 5;\n                return colorList[index];\n              }\n          },\n          emphasis: {\n            borderWidth: .5,\n            borderColor: '#c8c2c6',\n            color:\n              function (params) { // 设置颜色\n                let itemValue = params.data.value;\n                let index = 0;\n                if (itemValue > 5000) index = 0;\n                else if (itemValue > 1000) index = 1;\n                else if (itemValue > 100) index =2;\n                else if (itemValue > 10) index = 3;\n                else if (itemValue > 0) index = 4;\n                else index = 5;\n                return colorList[index];\n              }\n          }\n        },\n        markPoint: { //图表标注。\n          symbol: 'circle',\n          symbolSize: 7,//图形大小\n          label: {\n              normal: {\n                show: false,\n              },\n              emphasis: {\n                show: false,\n              }\n          },\n          itemStyle: {\n            normal: {\n              color: \n              (function () {\n                if(grobal.province_id !== 35 && grobal.province !== \"海外\") {\n                  return '#3FA0A7'\n                } else {\n                  return 'rgba(0, 0, 0, 0)'\n                }\n              })(),\n              border: '1px solid #fff',\n              borderColor:\n              (function () {\n                if(grobal.province_id !== 35 && grobal.province !== \"海外\") {\n                  return '#ced3e0'\n                } else {\n                  return 'rgba(0, 0, 0, 0)'\n                }\n              })(),\n\n            }\n          },\n          data: (function () {\n            let coordArr = [];\n            coordArr.push({coord: [grobal.longitude, grobal.latitude]});\n            return coordArr;\n          })()\n        }\n      }\n    ]\n  };\n  myChart.setOption(option);\n  myChart.off(\"click\");\n}\nfunction convert2canvas() {\n  // 获取需要转化的dom对象 直接使用$('.wrap')选取的为jquery对象 无法继续操作\n  var cntElem = document.body;\n  var shareContent = cntElem; //需要截图的包裹的（原生的）DOM 对象\n  var width = shareContent.offsetWidth; //获取dom 宽度\n  var height = shareContent.offsetHeight; //获取dom 高度\n  var canvas = document.createElement(\"canvas\"); //创建一个canvas节点\n  var scale = 2; //定义任意放大倍数 支持小数\n  canvas.width = String(+width * scale); //定义canvas 宽度 * 缩放\n  canvas.height = String(+height * scale); //定义canvas高度 *缩放\n  console.log(canvas.width, canvas.height);\n  //放大后再缩小提高清晰度\n  canvas.getContext(\"2d\").scale(scale, scale);\n  //document.body.append(canvas);\n  console.log(width)\n  console.log(height)\n  // 设置html2canvas方法的配置\n  var opts = {\n    scale: scale, // 添加的scale 参数\n    canvas: canvas, //自定义 canvas\n    allowTaint: true, //允许画布上有跨域图片 不建议使用 后面详细补充\n    // logging: true, //日志开关，便于查看html2canvas的内部执行流程\n    width: width, //dom 原始宽度\n    height: height,\n    dpi: 4, // 设置像素点,增加清晰度\n    useCORS: true, // 【重要】开启跨域配置\n    scale:1 // 设置倍率\n  };\n  // 开始转化为canvs对象\n  html2canvas(shareContent, opts).then(function(canvas) {\n\n    var context = canvas.getContext('2d');\n    // 【重要】关闭抗锯齿\n    context.mozImageSmoothingEnabled = false;\n    context.webkitImageSmoothingEnabled = false;\n    context.msImageSmoothingEnabled = false;\n    context.imageSmoothingEnabled = false;\n\n    // 【重要】默认转化的格式为png,也可设置为其他格式\n    let imgUrl = canvas.toDataURL('jpg'); // 将图片在放大的canvas画出后,要导入url,不然图片只有一部分\n    var img = document.createElement('img');\n    img.src=imgUrl;\n    img.style.cssText = `\n    width:100vw;\n    height:100vh;\n    position:absolute;\n    top:0;\n    left:0;\n    z-index:999;\n    opacity:0;\n    `\n    document.body.append(img);\n    console.log(img);\n  })\n}\n"],"sourceRoot":""}